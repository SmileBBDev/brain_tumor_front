# 프론트엔드 확장 계획

**작성일**: 2026-01-07
**수정일**: 2026-01-11
**현재 Phase**: Phase 4 프론트엔드 개발 준비중

현재 미사용 상태이지만 향후 개발 예정인 파일 목록입니다.

---

## 최근 완료 (2026-01-11) ✅

### DicomViewerPopup 기능 완성
| 기능 | 상태 | 파일 |
|------|------|------|
| 다중 뷰어 (최대 4개) | ✅ | `DicomViewerPopup.tsx` |
| 뷰어 탭 전환 + Selection 유지 | ✅ | `DicomViewerPopup.tsx`, `PacsSelector.jsx` |
| 좌우 스플리터 (드래그 조정) | ✅ | `DicomViewerPopup.tsx`, `.css` |
| All Play (동시 재생/정지) | ✅ | `DicomViewerPopup.tsx`, `ViewerSection.jsx` |
| Set (인스턴스=0 리셋) | ✅ | `DicomViewerPopup.tsx`, `ViewerSection.jsx` |
| 메타 오버레이 (Study/Series/Instance) | ✅ | `ViewerSection.jsx`, `.css` |
| Study Description 한글 경고 | ✅ | `UploadSection.jsx`, `.css` |

---

## 0. Phase 4 우선순위 작업 (2026-01-11)

### 0.1 치료/경과 화면 (Treatment & FollowUp)

백엔드 API 완료 상태, 프론트엔드 UI 구현 필요

| 파일 (예정) | 기능 | 우선순위 | 백엔드 API |
|-------------|------|----------|-----------|
| `src/pages/treatment/TreatmentListPage.tsx` | 치료 계획 목록 | 높음 | ✅ `/api/treatment/plans/` |
| `src/pages/treatment/TreatmentDetailPage.tsx` | 치료 계획 상세 | 높음 | ✅ `/api/treatment/plans/{id}/` |
| `src/pages/treatment/TreatmentSessionPage.tsx` | 치료 세션 관리 | 중간 | ✅ `/api/treatment/sessions/` |
| `src/pages/followup/FollowUpListPage.tsx` | 경과 추적 목록 | 높음 | ✅ `/api/followup/` |
| `src/pages/followup/FollowUpDetailPage.tsx` | 경과 상세/입력 | 높음 | ✅ `/api/followup/{id}/` |

#### 필요 작업
- [ ] routeMap에 `TREATMENT_LIST`, `TREATMENT_DETAIL`, `FOLLOWUP_LIST`, `FOLLOWUP_DETAIL` 등록
- [ ] DB에 메뉴 추가 (사이드바)
- [ ] 치료 유형별 UI (surgery, radiation, chemotherapy, observation)
- [ ] KPS Score 입력/표시 컴포넌트
- [ ] 환자별 치료/경과 히스토리 타임라인

#### 데이터 모델 참고
```
TreatmentPlan
├─ patient (FK)
├─ treatment_type (surgery/radiation/chemotherapy/observation)
├─ start_date, end_date
├─ status (planned/in_progress/completed/cancelled)
└─ notes

TreatmentSession
├─ plan (FK)
├─ session_date
├─ session_number
└─ notes

FollowUp
├─ patient (FK)
├─ encounter (FK, optional)
├─ followup_date
├─ kps_score
├─ symptoms, notes
└─ next_followup_date
```

---

### 0.2 AI 추론 화면 (AI Inference)

백엔드 API 완료 상태, 프론트엔드 UI 구현 필요

| 파일 (예정) | 기능 | 우선순위 | 백엔드 API |
|-------------|------|----------|-----------|
| `src/pages/ai/AIModelListPage.tsx` | AI 모델 목록 | 높음 | ✅ `/api/ai/models/` |
| `src/pages/ai/AIRequestPage.tsx` | AI 추론 요청 생성 | 높음 | ✅ `/api/ai/requests/` |
| `src/pages/ai/AIResultListPage.tsx` | 추론 결과 목록 | 높음 | ✅ `/api/ai/results/` |
| `src/pages/ai/AIResultDetailPage.tsx` | 결과 상세/검토 | 높음 | ✅ `/api/ai/results/{id}/` |
| `src/pages/ai/AIPatientAvailablePage.tsx` | 환자별 사용 가능 모델 | 중간 | ✅ `/api/ai/patients/{id}/available-models/` |

#### 필요 작업
- [ ] routeMap에 `AI_MODELS`, `AI_REQUEST`, `AI_RESULTS`, `AI_RESULT_DETAIL` 등록
- [ ] DB에 메뉴 추가 (사이드바 - AI 분석)
- [ ] 데이터 충족 여부 UI 표시 (required_keys 체크)
- [ ] 추론 상태 표시 (PENDING/PROCESSING/COMPLETED/FAILED)
- [ ] 결과 검토 UI (의사 확인/코멘트)
- [ ] 환자 상세 페이지에서 AI 추론 요청 버튼

#### AI 모델 정보 (현재 3개)
| 모델 ID | 이름 | 입력 요구사항 |
|---------|------|---------------|
| M1 | MRI 기반 분석 | MRI 영상 |
| MG | 유전자 분석 | GENETIC 검사 결과 |
| MM | 멀티모달 분석 | MRI + GENETIC |

#### 데이터 검증 API
```
POST /api/ai/requests/validate/
{
  "patient_id": 1,
  "model_id": "MM"
}
→ { "valid": true/false, "missing_keys": [...], "available_data": {...} }
```

---

### 0.3 환자 진료 페이지 (Clinic Page) - 스토리보드 48p

의사가 환자를 진료할 때 사용하는 통합 진료 화면

| 파일 (예정) | 기능 | 우선순위 | 백엔드 API |
|-------------|------|----------|-----------|
| `src/pages/clinic/ClinicPage.tsx` | 환자 진료 메인 페이지 | 높음 | 다수 API 조합 |
| `src/pages/clinic/components/SymptomCard.tsx` | 금일 증세 카드 | 높음 | `/api/encounters/` |
| `src/pages/clinic/components/DiagnosisCard.tsx` | 진단 및 처방 카드 | 높음 | 처방 API 필요 |
| `src/pages/clinic/components/OrderCard.tsx` | 오더 카드 | 높음 | `/api/ocs/` |
| `src/pages/clinic/components/HistoryCard.tsx` | 과거 진료 기록 카드 | 중간 | `/api/encounters/` |
| `src/pages/clinic/components/ScheduleCard.tsx` | 일정 카드 | 중간 | 예약 API 필요 |
| `src/pages/clinic/components/ResultCard.tsx` | 검사 결과 카드 | 높음 | `/api/ocs/?job_role=LIS` |
| `src/pages/clinic/components/TodayPatientCard.tsx` | 금일 예약 환자 카드 | 중간 | 예약 API 필요 |
| `src/pages/clinic/components/PrescriptionCard.tsx` | 과거 처방전 카드 | 낮음 | 처방 API 필요 |

#### 화면 레이아웃 (3열 구조)

```
┌─────────────────────────────────────────────────────────────────┐
│ 상단 바: 대시보드 | 환자관리 | [환자 진료] | 검사 관리   Doctor │
├─────────────────────────────────────────────────────────────────┤
│ 환자 정보: 성명 | 이성명    생년월일 | 030613    성별 | 남      │
├─────────────────┬─────────────────┬─────────────────────────────┤
│ [금일 증세]     │ [과거 진료 기록]│ [금일 예약 환자]            │
│ - 환자증세 입력 │ - 환자 과거진료 │ - 금일 진료 예약 환자 전체  │
│ - 저장          │   (Read)        │   (Read)                    │
├─────────────────┼─────────────────┼─────────────────────────────┤
│ [진단 및 처방]  │ [일정]          │ [과거 처방전]               │
│ - 진단기록      │ - 캘린더 영역   │ - 처방 기록 (Read)          │
│ - 약 처방       │                 │                             │
│ - 처방전 발행   │                 │                             │
├─────────────────┼─────────────────┼─────────────────────────────┤
│ [오더]          │ [검사 결과]     │                             │
│ - MRI Brain     │ - CBC 결과      │                             │
│   (IN-PROGRESS) │ - LAB-2024-115  │                             │
│ - CBC           │ - COMPLETED     │                             │
│   (COMPLETED)   │                 │                             │
│ - Lumbar Puncture│                │                             │
│   (SCHEDULED)   │                 │                             │
└─────────────────┴─────────────────┴─────────────────────────────┘
```

#### 필요 작업
- [ ] routeMap에 `CLINIC` 등록 (`/clinic/:patientId`)
- [ ] DB에 메뉴 추가 (사이드바 - 환자 진료)
- [ ] 환자 선택 후 진료 화면 진입 로직
- [ ] 3열 그리드 레이아웃 구현
- [ ] 재사용 가능한 Card 컴포넌트

#### 카드별 기능 상세

| 카드 | 주요 기능 | CRUD | 연동 API |
|------|----------|------|----------|
| 금일 증세 | 환자 증세 입력/저장 | Create/Update | `/api/encounters/` |
| 진단 및 처방 | 진단기록, 약 처방, 처방전 발행 | Create | 처방 API (미구현) |
| 오더 | OCS 오더 목록 (상태별 표시) | Read | `/api/ocs/?patient={id}` |
| 과거 진료 기록 | 환자 과거 진료 조회 | Read | `/api/encounters/?patient={id}` |
| 일정 | 캘린더 (예약 일정) | Read | 예약 API (미구현) |
| 검사 결과 | LIS 검사 결과 조회 | Read | `/api/ocs/?job_role=LIS&patient={id}` |
| 금일 예약 환자 | 오늘 예약된 환자 목록 | Read | 예약 API (미구현) |
| 과거 처방전 | 과거 처방 기록 조회 | Read | 처방 API (미구현) |

#### 추가 필요 백엔드 API
- [ ] 처방 (Prescription) 앱/API
- [ ] 예약 (Appointment) 앱/API

#### 참고 코드 구조
```tsx
// ClinicPage.tsx 기본 구조
<div className="clinic-page">
  <header className="top-bar">...</header>
  <section className="patient-info">...</section>
  <main className="content"> {/* 3열 그리드 */}
    <div className="column">
      <SymptomCard />
      <DiagnosisCard />
      <OrderCard />
    </div>
    <div className="column">
      <HistoryCard />
      <ScheduleCard />
      <ResultCard />
    </div>
    <div className="column">
      <TodayPatientCard />
      <PrescriptionCard />
    </div>
  </main>
</div>
```

---

## 1. 환자용 마이페이지 (Patient Portal)

환자가 직접 자신의 정보를 조회할 수 있는 포털 기능

| 파일 | 기능 | 우선순위 |
|------|------|---------|
| `src/pages/patient/MyCarePage.tsx` | 마이페이지 메인 | 높음 |
| `src/pages/patient/MyExamList.tsx` | 내 검사 목록 | 중간 |
| `src/pages/patient/MySummary.tsx` | 내 건강 요약 | 중간 |
| `src/pages/patient/MyVisitList.tsx` | 내 방문 기록 | 낮음 |

### 필요 작업
- [ ] routeMap에 `MY_CARE` 등록
- [ ] DB에 메뉴/권한 추가 (PATIENT 역할용)
- [ ] 환자용 API 엔드포인트 구현

---

## 2. 프로필 관리

사용자 프로필 조회/수정 기능

| 파일 | 기능 | 우선순위 |
|------|------|---------|
| `src/pages/common/ProfileView.tsx` | 프로필 조회 | 중간 |
| `src/pages/common/ProfileEdit.tsx` | 프로필 수정 | 중간 |

### 필요 작업
- [ ] 프로필 조회/수정 UI 구현
- [ ] 백엔드 프로필 API 연동
- [ ] 헤더 드롭다운에서 접근 가능하도록 연결

---

## 3. 추가 예정 페이지 (Placeholder)

| 파일 | 기능 | 상태 |
|------|------|------|
| `src/pages/clinic/ClinicView.tsx` | 진료실 뷰 | 기획 필요 |
| `src/pages/lis/ResultMonitor.tsx` | 검사 결과 모니터링 | 기획 필요 |
| `src/pages/lis/UploadResult.tsx` | 결과 업로드 (별도 페이지) | LISUploadPage로 대체 가능 |
| `src/pages/ris/ReadingDetail.tsx` | 판독 상세 | RISStudyDetailPage로 대체됨 |
| `src/pages/admin/AdminLayout.tsx` | 관리자 레이아웃 | 현재 미사용 |

---

## 4. 미사용 서비스

| 파일 | 상태 |
|------|------|
| `src/services/common.api.ts` | 빈 파일 - 공통 API 추가 시 사용 |

---

## 메모

- 이 파일들은 **삭제하지 마세요**
- 개발 시작 시 이 문서를 업데이트하고 routeMap/DB에 등록해주세요
- 완료된 항목은 체크박스를 체크하세요
